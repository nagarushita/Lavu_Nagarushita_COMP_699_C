{% extends "base.html" %}

{% block title %}Register - Network Monitor{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold mb-6">Register New User</h2>
    
    <form method="POST" action="{{ url_for('auth.register') }}" class="bg-white p-6 rounded">
        <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Username</label>
            <input type="text" name="username" required
                   class="w-full px-3 py-2 border border-gray-300 rounded">
        </div>
        
        <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Email</label>
            <input type="email" name="email" required
                   class="w-full px-3 py-2 border border-gray-300 rounded">
        </div>
        
        <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Password</label>
            <input type="password" name="password" id="password" required
                   class="w-full px-3 py-2 border border-gray-300 rounded">
            <div class="mt-2 h-2 bg-gray-200 rounded">
                <div id="strength-bar" class="h-full bg-red-500 rounded transition-all"></div>
            </div>
        </div>
        
        <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Confirm Password</label>
            <input type="password" name="confirm_password" required
                   class="w-full px-3 py-2 border border-gray-300 rounded">
        </div>
        
        <div class="mb-4">
            <label class="block text-sm font-medium mb-2">Role</label>
            <select name="role" class="w-full px-3 py-2 border border-gray-300 rounded">
                <option value="viewer">Viewer</option>
                <option value="analyst">Analyst</option>
                <option value="admin">Admin</option>
            </select>
        </div>
        
        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
            Create User
        </button>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('password').addEventListener('input', function(e) {
        const password = e.target.value;
        const bar = document.getElementById('strength-bar');
        let strength = 0;
        
        if (password.length >= 8) strength += 25;
        if (/[A-Z]/.test(password)) strength += 25;
        if (/[0-9]/.test(password)) strength += 25;
        if (/[^A-Za-z0-9]/.test(password)) strength += 25;
        
        bar.style.width = strength + '%';
        bar.className = 'h-full rounded transition-all ' + 
            (strength < 50 ? 'bg-red-500' : strength < 75 ? 'bg-yellow-500' : 'bg-green-500');
    });
</script>
{% endblock %}
